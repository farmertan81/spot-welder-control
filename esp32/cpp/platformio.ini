[env:esp32-s3-zero]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; Critical: Set correct flash size for 4MB chip
board_build.flash_size = 4MB
board_build.flash_mode = dio
board_build.partitions = partitions_4mb.csv

; Override the board's default 8MB flash size
board_upload.flash_size = 4MB

; USB CDC configuration for ESP32-S3-Zero
build_flags = 
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1

; Upload settings
upload_speed = 921600
monitor_speed = 115200